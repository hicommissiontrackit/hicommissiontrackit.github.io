<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>ZingGrid: Blank Grid</title>
  <script src="https://cdn.zinggrid.com/zinggrid.min.js" defer></script>
  <script src="moment.js"></script>
  <style>
    body {
      background: #e6e6e6;
    }

    zing-grid[loading] {
      height: 548px;
    }
.increased { color:#66bb6a; }
.increased::before { content:'↑'; }
.decreased { color:#ef5350; }
.decreased::before { content:'↓'; }
.highlight { background:#fff59d ; }
  </style>
  <img src="favicon.ico"/>
  <script>
  

  var defString = moment().format('LL');
  var defString1 = moment().add(30, 'days').calendar();
  //var defString = moment().subtract(53, 'days').calendar();
  var somfutureDate = new Date(defString1);

  const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
  const firstDate = new Date(2008, 1, 12);
  const secondDate = new Date(2008, 1, 22);

  const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));

  console.log(diffDays);
  
  var somDate = new Date(defString);
  console.log(somDate);

  var deString = new Date();
  var d1 = new Date(defString);
  var d2 = new Date();

  var DateDiff= {
    inDays: function(d1, d2){
    var t2 = d2.getTime();
    var t1 = d1.getTime();
    }
  }  
  var numdays = DateDiff.inDays(d1, d2);

  // that row. Else return decreased
  function _renderOpenValue(openValue, cellDOMRef, cellRef) {
    var deString = cellRef.record.enddate; 
    var dsString = cellRef.record.enddate;  
    var dtestStr = "May, 20, 1984";

    const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
    const firstDate = new Date(cellRef.record.startdate);
    const secondDate = new Date(cellRef.record.enddate);

  const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));
  
  console.log(diffDays);

    if(somfutureDate > somDate)
     {
        return 'decreased';
     }else if (cellRef.record.enddate == cellRef.record.startdate) {
        return 'highlight'; 
     } else {
        return 'increased';
     }   
  }
</script>
</head>

<body>

  <zing-grid src="https://tribeofjudah-9c61f.firebaseio.com/jude" caption="HiCommission CRUD Endpoint" editor-controls="all" pager="" page-size="5" layout="row" role="grid" editor="inline" viewport="tablet-portrait" adapter="firebase" >
    <zg-colgroup>
      <zg-column index="enddate" type="currency" cell-class="_renderOpenValue"></zg-column>
      <zg-column index="fieldname" type="currency"  ></zg-column>
      <zg-column index="startdate" type="currency" ></zg-column>
      <zg-column index="text" type="currency"></zg-column>
      <zg-column index="volume"></zg-column>
    </zg-colgroup>
  </zing-grid>>


</body>

</html>