<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>ZingGrid: Blank Grid</title>
  <script src="https://cdn.zinggrid.com/zinggrid.min.js" defer></script>
  <script src="moment.js"></script>
  <style>
    body {
      background: #e6e6e6;
    }

    zing-grid[loading] {
      height: 548px;
    }
.increased { color:#ef5350; }
.increased::before { content:'↑'; }
.decreased { color:#66bb6a; }
.decreased::before { content:'↓'; }
.highlight { background:#fff59d ; }
  </style>
  <img src="favicon.ico"/>
  <script>
  

  var defString = moment().format('LL');
  var defString1 = moment().add(30, 'days').calendar();
  //var defString = moment().subtract(53, 'days').calendar();
  var somfutureDate = new Date(defString1);
/*
  const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
  const firstDate = new Date(2008, 1, 12);
  const secondDate = new Date(2008, 1, 22);

  const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));

  console.log(diffDays);
  */

  var somDate = new Date(defString);
  console.log(somDate);

  var deString = new Date();
 
  //var numdays = DateDiff.inDays(d1, d2);

  // that row. Else return decreased
  function _renderOpenValue(openValue, cellDOMRef, cellRef) {
    var deString = cellRef.record.enddate; 
    var dsString = cellRef.record.enddate;  
    var dtestStr = "May, 20, 1984";

    const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
    const firstDate = new Date(cellRef.record.startdate);
    const secondDate = new Date(cellRef.record.enddate);

  const diffDays = Math.round(Math.abs((secondDate - firstDate) / oneDay));
  
  console.log(diffDays);
  //TODO textfield validation https://stackoverflow.com/questions/36494921/how-validation-date-to-not-less-than-the-start-date-in-textbox-using-javascript
                //end date                //start date  
  if (Date.parse(secondDate) > Date.parse(firstDate)) {
    console.log('The ending date ' + secondDate + ' is O.K. It occurs after the starting date. ' + firstDate)
    return 'decreased';
  }else if(Date.parse(secondDate) == Date.parse(firstDate)){
    return 'highlight';
  }else{
    console.log('The ending date ' + secondDate + ' must occur after the starting date. ' + firstDate);
    return 'increased';
  }
 }

</script>
</head>

<body>

  <zing-grid src="https://tribeofjudah-9c61f.firebaseio.com/jude" caption="HiCommission CRUD Endpoint" editor-controls="all" pager="" page-size="5" layout="row" role="grid" editor="inline" viewport="tablet-portrait" adapter="firebase" filter viewport-stop>
    <zg-colgroup>
      <zg-column index="enddate" type="date" cell-class="_renderOpenValue"></zg-column>
      <zg-column index="fieldname" type="currency" ></zg-column>
      <zg-column index="startdate" type="date" ></zg-column>
      <zg-column index="text" type="currency"></zg-column>
      <zg-column index="volume"></zg-column>
    </zg-colgroup>
  </zing-grid>>


</body>

</html>